/* =====================
     DIFF VIEW
     ===================== */

/* --- Diff color variables --- */
:root {
  --diff-added-bg: rgba(35, 134, 54, 0.07);
  --diff-added-border: rgba(35, 134, 54, 0.35);
  --diff-added-indicator: rgba(35, 134, 54, 0.6);

  --diff-removed-bg: rgba(208, 44, 55, 0.06);
  --diff-removed-border: rgba(208, 44, 55, 0.3);
  --diff-removed-indicator: rgba(208, 44, 55, 0.55);

  --diff-unchanged-text: var(--tt-gray-light-a-600);
}

.dark {
  --diff-added-bg: rgba(46, 160, 67, 0.1);
  --diff-added-border: rgba(46, 160, 67, 0.35);
  --diff-added-indicator: rgba(46, 160, 67, 0.7);

  --diff-removed-bg: rgba(248, 81, 73, 0.1);
  --diff-removed-border: rgba(248, 81, 73, 0.3);
  --diff-removed-indicator: rgba(248, 81, 73, 0.65);

  --diff-unchanged-text: var(--tt-gray-dark-a-600);
}

/* --- Diff view container --- */
.diff-view {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

/* --- Individual diff block --- */
.diff-block {
  position: relative;
  border-radius: var(--tt-radius-sm, 6px);
  transition:
    background-color var(--tt-transition-duration-default, 0.2s)
      var(--tt-transition-easing-default),
    border-color var(--tt-transition-duration-default, 0.2s)
      var(--tt-transition-easing-default);
}

.diff-block-content {
  margin: 0;
  white-space: pre-wrap;
  word-wrap: break-word;
  font-family: "DM Sans", sans-serif;
  font-size: 1rem;
  line-height: 1.6;
  font-weight: normal;
}

.diff-block-indicator {
  position: absolute;
  left: 6px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 0.75rem;
  font-weight: 700;
  font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas,
    "Liberation Mono", monospace;
  width: 16px;
  height: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--tt-radius-xxs, 2px);
  user-select: none;
}

/* --- Unchanged blocks --- */
.diff-block--unchanged {
  padding: 4px 16px;
  color: var(--diff-unchanged-text);

  .diff-block-content {
    opacity: 0.65;
  }
}

/* --- Added blocks --- */
.diff-block--added {
  background-color: var(--diff-added-bg);
  border-left: 3px solid var(--diff-added-border);
  padding: 10px 16px 10px 28px;

  .diff-block-indicator {
    color: var(--diff-added-indicator);
  }
}

/* --- Removed blocks --- */
.diff-block--removed {
  background-color: var(--diff-removed-bg);
  border-left: 3px solid var(--diff-removed-border);
  padding: 10px 16px 10px 28px;

  .diff-block-content {
    text-decoration: line-through;
    text-decoration-color: var(--diff-removed-border);
    opacity: 0.75;
  }

  .diff-block-indicator {
    color: var(--diff-removed-indicator);
  }
}

/* --- Modified blocks (container for old+new) --- */
.diff-block--modified {
  display: flex;
  flex-direction: column;
  gap: 2px;
  padding: 0;
  background: transparent;

  > .diff-block--nested {
    border-radius: var(--tt-radius-sm, 6px);
  }

  > .diff-block--removed.diff-block--nested {
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
  }

  > .diff-block--added.diff-block--nested {
    border-top-left-radius: 0;
    border-top-right-radius: 0;
  }
}

/* --- Empty state --- */
.diff-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 3rem 1rem;
  gap: 0.75rem;
  color: var(--diff-unchanged-text);

  .diff-empty-icon {
    opacity: 0.5;

    svg {
      width: 2rem;
      height: 2rem;
    }
  }

  p {
    margin: 0;
    font-size: 0.9375rem;
    font-weight: 500;
  }
}
